(function(){var b="angularUtils.directives.dirPagination";var c="__default";angular.module(b,[]).directive("dirPaginate",["$compile","$parse","paginationService",e]).directive("dirPaginateNoCompile",f).directive("dirPaginationControls",["paginationService","paginationTemplate",a]).filter("itemsPerPage",["paginationService",i]).service("paginationService",g).provider("paginationTemplate",d).run(["$templateCache",h]);function e(p,l,q){return{terminal:true,multiElement:true,priority:100,compile:o};function o(x,w){var z=w.dirPaginate;var y=z.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);var t=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(y[2].match(t)===null){throw"pagination directive: the 'itemsPerPage' filter must be set."}var v=y[2].replace(t,"");var u=l(v);k(x);var B=w.paginationId||c;q.registerInstance(B);return function A(G,E,D){var C=l(D.paginationId)(G)||D.paginationId||c;q.registerInstance(C);var F=n(z,C);s(E,D,F);m(E);var I=p(E);var H=r(G,D,C);q.setCurrentPageParser(C,H,G);if(typeof D.totalItems!=="undefined"){q.setAsyncModeTrue(C);G.$watch(function(){return l(D.totalItems)(G)},function(J){if(0<=J){q.setCollectionLength(C,J)}})}else{q.setAsyncModeFalse(C);G.$watchCollection(function(){return u(G)},function(K){if(K){var J=(K instanceof Array)?K.length:Object.keys(K).length;q.setCollectionLength(C,J)}})}I(G)}}function n(w,t){var u,v=!!w.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);if(t!==c&&!v){u=w.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+t+"'")}else{u=w}return u}function s(u,t,v){if(u[0].hasAttribute("dir-paginate-start")||u[0].hasAttribute("data-dir-paginate-start")){t.$set("ngRepeatStart",v);u.eq(u.length-1).attr("ng-repeat-end",true)}else{t.$set("ngRepeat",v)}}function k(t){angular.forEach(t,function(u){if(u.nodeType===1){angular.element(u).attr("dir-paginate-no-compile",true)}})}function m(t){angular.forEach(t,function(u){if(u.nodeType===1){angular.element(u).removeAttr("dir-paginate-no-compile")}});t.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate");t.eq(t.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function r(v,u,t){var x;if(u.currentPage){x=l(u.currentPage)}else{var w=(t+"__currentPage").replace(/\W/g,"_");v[w]=1;x=l(w)}return x}}function f(){return{priority:5000,terminal:true}}function h(k){k.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function a(r,l){var q=/^\d+$/;var n={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:o};var p=l.getString();if(p!==undefined){n.template=p}else{n.templateUrl=function(t,s){return s.templateUrl||l.getPath()}}return n;function o(B,w,z){var A=z.paginationId||c;var C=B.paginationId||z.paginationId||c;if(!r.isRegistered(C)&&!r.isRegistered(A)){var u=(C!==c)?" (id: "+C+") ":" ";if(window.console){console.warn("Pagination directive: the pagination controls"+u+"cannot be used without the corresponding pagination directive, which was not found at link time.")}}if(!B.maxSize){B.maxSize=9}B.autoHide=B.autoHide===undefined?true:B.autoHide;B.directionLinks=angular.isDefined(z.directionLinks)?B.$parent.$eval(z.directionLinks):true;B.boundaryLinks=angular.isDefined(z.boundaryLinks)?B.$parent.$eval(z.boundaryLinks):false;var t=Math.max(B.maxSize,5);B.pages=[];B.pagination={last:1,current:1};B.range={lower:1,upper:1,total:1};B.$watch("maxSize",function(D){if(D){t=Math.max(B.maxSize,5);s()}});B.$watch(function(){if(r.isRegistered(C)){return(r.getCollectionLength(C)+1)*r.getItemsPerPage(C)}},function(D){if(0<D){s()}});B.$watch(function(){if(r.isRegistered(C)){return(r.getItemsPerPage(C))}},function(E,D){if(E!=D&&typeof D!=="undefined"){y(B.pagination.current)}});B.$watch(function(){if(r.isRegistered(C)){return r.getCurrentPage(C)}},function(E,D){if(E!=D){y(E)}});B.setCurrent=function(D){if(r.isRegistered(C)&&v(D)){D=parseInt(D,10);r.setCurrentPage(C,D)}};B.tracker=function(E,D){return E+"_"+D};function y(D){if(r.isRegistered(C)&&v(D)){var E=B.pagination.current;B.pages=m(D,r.getCollectionLength(C),r.getItemsPerPage(C),t);B.pagination.current=D;x();if(B.onPageChange){B.onPageChange({newPageNumber:D,oldPageNumber:E})}}}function s(){if(r.isRegistered(C)){var D=parseInt(r.getCurrentPage(C))||1;B.pages=m(D,r.getCollectionLength(C),r.getItemsPerPage(C),t);B.pagination.current=D;B.pagination.last=B.pages[B.pages.length-1];if(B.pagination.last<B.pagination.current){B.setCurrent(B.pagination.last)}else{x()}}}function x(){if(r.isRegistered(C)){var E=r.getCurrentPage(C),D=r.getItemsPerPage(C),F=r.getCollectionLength(C);B.range.lower=(E-1)*D+1;B.range.upper=Math.min(E*D,F);B.range.total=F}}function v(D){return(q.test(D)&&(0<D&&D<=B.pagination.last))}}function m(A,E,t,u){var v=[];var B=Math.ceil(E/t);var s=Math.ceil(u/2);var z;if(A<=s){z="start"}else{if(B-s<A){z="end"}else{z="middle"}}var D=u<B;var y=1;while(y<=B&&y<=u){var C=k(y,A,u,B);var x=(y===2&&(z==="middle"||z==="end"));var w=(y===u-1&&(z==="middle"||z==="start"));if(D&&(x||w)){v.push("...")}else{v.push(C)}y++}return v}function k(t,u,w,v){var s=Math.ceil(w/2);if(t===w){return v}else{if(t===1){return t}else{if(w<v){if(v-s<u){return v-w+t}else{if(s<u){return u-s+t}else{return t}}}else{return t}}}}}function i(k){return function(p,n,m){if(typeof(m)==="undefined"){m=c}if(!k.isRegistered(m)){throw"pagination directive: the itemsPerPage id argument (id: "+m+") does not match a registered pagination-id."}var l;var q;if(angular.isObject(p)){n=parseInt(n)||9999999999;if(k.isAsyncMode(m)){q=0}else{q=(k.getCurrentPage(m)-1)*n}l=q+n;k.setItemsPerPage(m,n);if(p instanceof Array){return p.slice(q,l)}else{var o={};angular.forEach(j(p).slice(q,l),function(r){o[r]=p[r]});return o}}else{return p}}}function j(l){if(!Object.keys){var m=[];for(var k in l){if(l.hasOwnProperty(k)){m.push(k)}}return m}else{return Object.keys(l)}}function g(){var k={};var l;this.registerInstance=function(m){if(typeof k[m]==="undefined"){k[m]={asyncMode:false};l=m}};this.deregisterInstance=function(m){delete k[m]};this.isRegistered=function(m){return(typeof k[m]!=="undefined")};this.getLastInstanceId=function(){return l};this.setCurrentPageParser=function(n,o,m){k[n].currentPageParser=o;k[n].context=m};this.setCurrentPage=function(m,n){k[m].currentPageParser.assign(k[m].context,n)};this.getCurrentPage=function(m){var n=k[m].currentPageParser;return n?n(k[m].context):1};this.setItemsPerPage=function(m,n){k[m].itemsPerPage=n};this.getItemsPerPage=function(m){return k[m].itemsPerPage};this.setCollectionLength=function(m,n){k[m].collectionLength=n};this.getCollectionLength=function(m){return k[m].collectionLength};this.setAsyncModeTrue=function(m){k[m].asyncMode=true};this.setAsyncModeFalse=function(m){k[m].asyncMode=false};this.isAsyncMode=function(m){return k[m].asyncMode}}function d(){var k="angularUtils.directives.dirPagination.template";var l;this.setPath=function(m){k=m};this.setString=function(m){l=m};this.$get=function(){return{getPath:function(){return k},getString:function(){return l}}}}})();
